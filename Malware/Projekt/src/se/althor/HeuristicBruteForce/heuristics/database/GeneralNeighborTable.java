package se.althor.HeuristicBruteForce.heuristics.database;

/**
 * A more general neighbor table. Used to check letters in the middle of words
 * (aka, everything not suffix or prefix).
 * 
 * @author Kristian Lundkvist
 * 
 */
public class GeneralNeighborTable extends NeighborTable implements
		HeuristicCheck {

	@Override
	public boolean isValid(String string) {

		char[] characters = string.toCharArray();

		// The word is not valid if there are characters that do not appear next
		// to each other.
		for (int i = 0; i < characters.length - 1; i++) {
			if (this.getNextTo(characters[i], characters[i + 1]) == 0) {
				return false;
			}
		}

		// The word is not valid if there are characters that do not appear
		// apart from each other.
		for (int i = 0; i < characters.length - 2; i++) {
			if (this.getApartFrom(characters[i], characters[i + 2]) == 0) {
				return false;
			}
		}

		return true;
	}

	@Override
	public void analyseWord(String word) {
		char[] characters = word.toCharArray();

		for (int i = 0; i < characters.length - 1; i++) {
			this.increaseNextTo(characters[i], characters[i + 1]);
		}

		for (int i = 0; i < characters.length - 2; i++) {
			this.increaseApartFrom(characters[i], characters[i + 2]);
		}

	}

}
